---

title: Vault Swaps

description: Description of the Vault smart contract for integration purposes.

---

import { Callout } from "@/components";

# Swaps via Vault smart contract

## Overview

The Vault smart contract, besides holding assets, acts as an entry point for starting a swap without requiring a [deposit address](../javascript-sdk/swap-assets/request-deposit-address). Furthermore, for cross-chain messaging swaps, the Vault will call the destination address with a particular function signature.

<Callout type="info">
For more information, learn [How Swapping Works](../../how-swapping-works.mdx).
</Callout>

## Simple swap

To make a swap the user needs to call swap on the Vault of the source chain, specifying the parameters described in the table below. In the case of swapping ERC-20 tokens an **approval is required**.

{<table>

  <thead>
    <tr>
      <th width="223">Param</th>
      <th width="371">Description</th>
      <th width="244.33333333333331">Data type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>dstChain</code>
      </td>
      <td>Destination chain for the swap</td>
      <td><code>uint32</code></td>
    </tr>
    <tr>
      <td>
        <code>dstAddress</code>
      </td>
      <td>
        Address where the swapped tokens will be sent to on the destination
        chain. Addresses must be encoded into a bytes type
      </td>
      <td><code>address</code></td>
    </tr>
    <tr>
      <td>
        <code>dstToken</code>
      </td>
      <td>Token to be received on the destination chain</td>
      <td><code>uint32</code></td>
    </tr>
    <tr>
      <td>
        <code>srcToken</code>
      </td>
      <td>Address of the token to be swapped from the source chain</td>
      <td><code>address</code></td>
    </tr>
    <tr>
      <td>
        <code>amount</code>
      </td>
      <td>Amount of the source token to be swapped. When swapping a native
      asset, the <code>msg.value</code> passed in the call will be used instead. </td>
      <td><code>uint</code></td>
    </tr>
    <tr>
      <td>
        <code>cfParameters</code>
      </td>
      <td>
        Additional metadata for future features. Currently unused.
      </td>
      <td><code>bytes</code></td>
    </tr>
  </tbody>
</table>}


```solidity
    // Swap native token
    function xSwapNative(
        uint32 dstChain,
        bytes calldata dstAddress,
        uint32 dstToken,
        bytes calldata cfParameters
    ) external payable;

    // Swap ERC20 token
    function xSwapToken(
        uint32 dstChain,
        bytes calldata dstAddress,
        uint32 dstToken,
        IERC20 srcToken,
        uint256 amount,
        bytes calldata cfParameters
    ) external;
```

## Swap + call a receiver with cross-chain messaging

Chainflip supports cross-chain messaging, calling a smart contract on the destination chain and passing a message between chains. The smart contract call looks very similar to the previous ones but with some added parameters.

For more information see [Cross-Chain Messaging](cross-chain-messaging/cross-chain-messaging.mdx). The swap could have originated in any supported chain, irrespective of whether the chain supports smart contracts.

<Callout type="warning">

Invalid parameters may lead to loss of funds. Make sure all parameters are correct, supported and follow the Chainflip protocol's nomenclature since reverting a transaction is not guaranteed.

</Callout>

{<table>

  <thead>
    <tr>
      <th width="223">Param</th>
      <th width="371">Description</th>
      <th width="244.33333333333331">Data type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>message</code>
      </td>
      <td>
        Message that is passed to the destination address on the destination. It must be shorter than 10k bytes.
        chain
      </td>
      <td><code>bytes</code></td>
    </tr>
    <tr>
      <td>
        <code>gasBudget</code>
      </td>
      <td>
        Gas budget for the call on the destination chain. This amount is based
        on the source asset and will be subtracted from the input amount and swapped
        to pay for gas.
      </td>
      <td><code>uint</code></td>
    </tr>
  </tbody>
</table>}


```solidity
    // Swap native token
    function xCallNative(
        uint32 dstChain,
        bytes calldata dstAddress,
        uint32 dstToken,
        bytes calldata message,
        uint256 gasAmount,
        bytes calldata cfParameters
    ) external payable;

    // Swap ERC20 token
    function xCallToken(
        uint32 dstChain,
        bytes calldata dstAddress,
        uint32 dstToken,
        bytes calldata message,
        uint256 gasAmount,
        IERC20 srcToken,
        uint256 amount,
        bytes calldata cfParameters
    ) external;
```

## Chain and Asset Notation

Chainflip uses it's own notation for chain and token within the the smart contracts. These are the values for the source and destination chains and assets parameters described above. The same values apply for the the corresponding testnets (e.g. Ethereum mainnet and Sepolia share the same value).

### Supported Assets

| Asset   | ID |
| ------- | -- |
| ETH     | 1  |
| FLIP    | 2  |
| USDC    | 3  |
| DOT     | 4  |
| BTC     | 5  |
| arbETH  | 6  |
| arbUSDC | 7  |
| USDT    | 8  |
| SOL     | 9  |
| solUSDC | 10  |

### Supported Chains

| Chain      | ID |
| ---------- | -- |
| Ethereum   | 1  |
| Polkadot   | 2  |
| Bitcoin    | 3  |
| Arbitrum   | 4  |
| Solana     | 5  |
