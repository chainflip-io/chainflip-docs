---

title: Cross-Chain Messaging

description: Description of cross-chain messaging capabilities.

---

import { Callout } from "@/components";

# Cross-Chain Messaging

## Introduction

Cross-chain messaging allows for developers to send messages cross-chains along with a swap. Cross-chain messaging swaps follow the same flow as regular swaps but with the addition of a message that is sent to a receiver contract on the destination chain via program or smart contract call.

As described in [How Swapping Works](../../../how-swapping-works.md), swaps in Chainflip can be initiated via requesting a deposit address or via a smart contract call (only in EVM chains). Both of those methods support cross-chain messaging by specifying a `message` parameter and a `gasBudget` parameter. The SDK makes it seamless to [request a deposit address with CCM](../../javascript-sdk/swap-assets/request-deposit-address/v2.md#ccmparams-cross-chain-messaging-ccm) or [execute a swap with CCM](../vault-swaps.md#receive-call-and-asset-on-the-receiver-contract).

The CCM Channel Metadata - required for CCM swaps (`channel_metadata`), is shown below. It must be passed in when requesting a deposit channel via `request_swap_deposit_address` or when encoding a Vault swap via `request_swap_parameter_encoding()` RPC call.

```rust
/// For CCM message
pub struct CcmChannelMetadata {
	/// A Vec of bytes with maximum length of 15_000. `BoundedVec<u8, ConstU32<15_000>>`
	pub message: CcmMessage,
	/// User funds designated to be used for gas.
	pub gas_budget: GasAmount,
	/// Additional parameters for the cross chain message. Only used for Solana CCMs 
	/// A Vec of bytes with maximum length of 1_000. `BoundedVec<u8, ConstU32<1_000>>`
	pub ccm_additional_data: CcmAdditionalData,
}
```

<Callout type="info">
More details in the EVM smart contract implementation can be found in the [EVM vault implementation](../vault-swaps.md#swap--call-a-receiver-with-cross-chain-messaging).
</Callout>

## Chains supported

The following chains are supported for cross-chain messaging as destination chains:

- EVM Chains (Ethereum, Arbitrum)
- Solana

## Implementation Checklist

- The destination chain needs to be a Chainflip supported CCM-compatible chain.
- The swap must be initiated by requesting a deposit address or via a smart contract call specifying the extra specifying the `message` and the `gasBudget` parameters in both cases.
- The message should be shorter than 15k bytes.
- The **gas budget** will be paid as egress fees when the call is constructed for broadcast. The Chainflip protocol will automatically swap the minimum amount of the destination asset to pay for the gas fees.
- The **gas budget provided needs to be sufficient to execute the receiver's logic on the destination chain**. The estimation shall be done depending on the destination chain, [EVM](./evm-ccm#gas-budget-estimation) or [Solana](./sol-ccm#compute-budget-estimation).
- The receiver on the destination chain needs to be a smart contract or program with the interface described for the destination chain, either [EVM](../vault-swaps#receive-call-and-asset-on-the-receiver-contract-ccm) or [Solana](./sol-ccm#receive-call-and-asset-on-the-receiver-contract).
- The receiver on the destination chain needs to ensure that the receiving logic won't revert.

Depending on the destination chain there are some extra considerations that need to be taken into account. Check out [EVM considerations](./evm-ccm#considerations) and/or [Solana considerations](./sol-ccm#considerations)
