---

title: Liquidity Provider / Market Maker RPCs

description: The state chain has some RPCs and subscriptions that are useful for liquidity providers.

---

import { Callout } from "@/components";

# Liquidity Provider / Market Maker RPCs

Here are the RPCs and subscriptions that are useful for liquidity providers.

## WebSocket subscriptions

Example usages are using a Websocket utility such as [Websocat](https://github.com/vi/websocat):


### cf_subscribe_prewitness_swaps

Subscribes to all *potential* incoming swaps of a particular direction. Swaps are only executed after a certain number of block confirmations for each chain, so this RPC allows you to see
swaps that are *potential* but not yet confirmed. This is useful for liquidity providers to see what swaps are coming in and prepare for them.

The current number of confirmations (where 0 confirmations is just in mempool and not in a block) required for each chain is:

| Chain | Confirmations |
|-------|---------------|
| BTC   | 7             |
| ETH   | 8             |
| DOT   | Finalisation  |


> For BTC and ETH we use probabilistic finality, for DOT we use deterministic finality.

<Callout type="warning">
*WARNING:* Because these are witnessed *before* confirmation, they are not guaranteed to be executed *at all* or at that time, since blockchains can re-org.
</Callout>

#### Example

```
{"jsonrpc":"2.0","id":"1","method":"cf_subscribe_prewitness_swaps","params":["Btc", "Eth"]}
```

### cf_subscribe_pool_price

Subscribes to the current price of a particular pool. This is useful for liquidity providers to see the current price of a pool.

It returns the price at the time of beginning the subscription as the first item in the stream. Subsequent items are only returned if there is a *change* in the price.

#### Example

```
{"jsonrpc":"2.0","id":"1","method":"cf_subscribe_pool_price","params":["Btc", "Eth"]}
```

## RPC requests

Example usages are using curl:

### cf_required_asset_ratio_for_range_order

Returns the ratio of assets that would be required to create a range order at the specified tick range.

#### Example

```
{"jsonrpc":"2.0","method":"cf_required_asset_ratio_for_range_order","params":["Btc", "Eth", [0, 1000]]}
```

### cf_pool_info

Returns the fees percentages lps earn in the given pool.

#### Example

```
{"jsonrpc":"2.0","method":"cf_pool_info","params":["Btc", "Eth"]}
```

### cf_pool_depth

Returns depth of a specified pool between two prices.

#### Example

```
{"jsonrpc":"2.0","method":"cf_pool_depth","params":["Btc", "Eth", [0, 1000]]}
```

### cf_pool_liquidity

Returns all the liquidity available for swaps in a particular pool.

#### Example

```
{"jsonrpc":"2.0","method":"cf_pool_liquidity","params":["Btc", "Eth"]}
```

### cf_pool_orders

Returns all the orders associated with a specified account in a particular pool.

#### Example

```
{"jsonrpc":"2.0","method":"cf_pool_orders","params":["Btc", "Eth", "cFLdopvNB7LaiBbJoNdNC26e9Gc1FNJKFtvNZjAmXAAVnzCk4"]}
```

### cf_pool_range_order_liquidity_value

Returns the value of a hypothetical range order, e.g. the assets would would be returned to an LPs free balance if they were to close/cancel such a range order.

#### Example

```
{"jsonrpc":"2.0","method":"cf_pool_range_order_liquidity_value","params":["Btc", "Eth", [0, 1000], 10000000]}
```
